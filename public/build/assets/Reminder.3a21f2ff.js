import{T as b,r as _,C as q,o as u,f as g,a as e,P as O,Q as z,j as F,c as S,w as C,d as v,b as m,u as p,x as Y,N as G,i as x,q as T,F as J,s as Q,t as I,l as B,n as H,I as ee,J as te,R as oe,O as D}from"../app.js";import{t as h}from"./useToast.6c330c37.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as w}from"./Button.c0cdbdec.js";import{_ as N}from"./Modal.c851f4cd.js";import{_ as L}from"./FormInput.b426eef8.js";import{_ as se}from"./AuthenticateMobileSettingLayout.c0abe8be.js";import{d as E}from"./AuthenticatedLayout.16b5006f.js";import{_ as le}from"./Settings.104bb528.js";import{_ as ae}from"./Button.54a91a2a.js";import{a as re,r as ne}from"./TrashIcon.61f92f5e.js";import{r as ie}from"./CheckCircleIcon.3493ab65.js";import{r as de}from"./XCircleIcon.eff5350d.js";import"./index.m.c450fc65.js";const ue=r=>(O("data-v-0330e5bf"),r=r(),z(),r),ce={class:"switch"},me=["checked"],pe=ue(()=>e("span",{class:"slider round"},null,-1)),_e={__name:"ToggleStatusSwitch",props:{notifiable:Boolean,reminder:Object},setup(r){const i=r;let a=b({status:""});const s=_(i.notifiable==1);q(()=>i.reminder,()=>{a=b({...i.reminder}),console.log("Forms: ",a)});const t=()=>{s.value=!s.value,a=b({status:s.value}),a.patch(route("setting.reminder.status.update",i.reminder.id),{onSuccess:()=>{h.success("Status has been updated!")},onError:()=>{a.errors&&h.error("Something went wrong!")}})};return(f,d)=>(u(),g("label",ce,[e("input",{type:"checkbox",checked:i.notifiable==1,onClick:t},null,8,me),pe]))}},fe=K(_e,[["__scopeId","data-v-0330e5bf"]]),ge=e("div",{class:"text-left"},[e("h1",{class:"mt-2 mb-8"}," Edit Personal Reminder ")],-1),ve=e("hr",null,null,-1),be=["onSubmit"],he={class:"edit-modal-body"},ye={class:"flex justify-end gap-x-2 mt-4"},xe={__name:"UpdateReminder",props:{modelValue:Boolean,reminder:Object},emits:["update:modelValue"],setup(r,{emit:i}){const a=r,s=F({get(){return a.modelValue},set(d){i("update:modelValue",d)}});let t=b({original_time:""});q(()=>a.reminder,()=>{t=b({...a.reminder}),console.log("Forms: ",t)});const f=()=>{t.patch(route("setting.reminder.update",t.id),{onSuccess:()=>{t.reset(),h.success("Time has been updated successfully!"),i("update:modelValue",!1)},onError:()=>{t.errors&&h.error("All fields are required")}})};return(d,o)=>(u(),S(N,{modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=c=>s.value=c)},{default:C(()=>[ge,ve,e("form",{class:"mt-8",onSubmit:v(f,["prevent"])},[e("div",he,[m(L,{id:"input1",modelValue:p(t).original_time,"onUpdate:modelValue":o[0]||(o[0]=c=>p(t).original_time=c),label:"Time",required:"",type:"time",error:p(t).errors.original_time},null,8,["modelValue","error"])]),e("div",ye,[m(w,{label:"Save",type:"submit",color:"success"}),m(w,{label:"Cancel",color:"gray",onClick:o[1]||(o[1]=v(c=>s.value=!1,["prevent"]))})])],40,be)]),_:1},8,["modelValue"]))}},Se=e("div",{class:"text-left"},[e("h1",{class:"mt-2 mb-8"}," Add Personal Reminder ")],-1),we=e("hr",null,null,-1),Ve=["onSubmit"],ke={class:"edit-modal-body"},$e={class:"flex justify-end gap-x-2 mt-4"},Ce={__name:"AddReminder",props:{modelValue:Boolean,isSubscribed:Boolean},emits:["update:modelValue"],setup(r,{emit:i}){const a=r,s=F({get(){return a.modelValue},set(d){i("update:modelValue",d)}}),t=b({original_time:"",custom_message:""}),f=()=>{t.post(route("setting.reminder.store"),{onSuccess:()=>{t.reset(),h.success("Time has been added successfully!"),i("update:modelValue",!1)},onError:()=>{var d;h.error((d=t.errors.error)!=null?d:"Fields are required")}})};return(d,o)=>(u(),S(N,{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=c=>s.value=c)},{default:C(()=>[Se,we,e("form",{class:"mt-8",onSubmit:v(f,["prevent"])},[e("div",ke,[m(L,{id:"input1",modelValue:p(t).original_time,"onUpdate:modelValue":o[0]||(o[0]=c=>p(t).original_time=c),label:"Time",required:"",type:"time",error:p(t).errors.original_time},null,8,["modelValue","error"]),a.isSubscribed?Y((u(),g("textarea",{key:0,id:"custom_message","onUpdate:modelValue":o[1]||(o[1]=c=>p(t).custom_message=c),name:"",cols:"10",rows:"4",placeholder:"Write your customer message here",class:"border-2 border-hover-theme-green w-full rounded-md px-2 py-1 dark:bg-gray-800 mt-4"},null,512)),[[G,p(t).custom_message]]):x("",!0)]),e("div",$e,[m(w,{label:"Save",type:"submit",color:"success"}),m(w,{label:"Cancel",color:"gray",onClick:o[2]||(o[2]=v(c=>s.value=!1,["prevent"]))})])],40,Ve)]),_:1},8,["modelValue"]))}},Te={class:"py-2"},Ie=e("h1",{class:""}," Delete Reminder ",-1),Be=e("p",{class:"text-base mt-2 font-light"}," Are you sure you want to delete this reminder? ",-1),Ne={class:"flex justify-end gap-x-2 mt-3"},Me={__name:"DeleteReminder",props:{modelValue:Boolean,reminder:Object},emits:["update:modelValue"],setup(r,{emit:i}){const a=r,s=F({get(){return a.modelValue},set(d){i("update:modelValue",d)}});let t=b({original_time:""});q(()=>a.reminder,()=>{t=b({...a.reminder}),console.log("Forms: ",t.id)});const f=()=>{t.delete(route("setting.reminder.delete",t.id),{onSuccess:()=>{t.reset(),h.success("Time has been deleted successfully!"),i("update:modelValue",!1)},onError:()=>{t.errors&&h.error("All fields are required")}})};return(d,o)=>(u(),S(N,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=c=>s.value=c)},{default:C(()=>[e("div",Te,[Ie,Be,e("div",Ne,[m(w,{label:"Cancel",color:"gray",onClick:o[0]||(o[0]=v(c=>s.value=!1,["prevent"]))}),m(w,{label:"Delete",color:"error",loading:d.loading,onClick:v(f,["prevent"])},null,8,["loading","onClick"])])])]),_:1},8,["modelValue"]))}};const je=r=>(O("data-v-497a4894"),r=r(),z(),r),Ue={class:"switch"},Re=["checked"],Ae=je(()=>e("span",{class:"slider round"},null,-1)),Ee={__name:"ToggleSwitch",props:{notifiable:Boolean},emits:["toggleCheckbox"],setup(r,{emit:i}){const a=r,s=_(a.notifiable==1),t=()=>{s.value=!s.value,i("toggleCheckbox",s.value)};return(f,d)=>(u(),g("label",Ue,[e("input",{type:"checkbox",checked:a.notifiable==1,onClick:t},null,8,Re),Ae]))}},qe=K(Ee,[["__scopeId","data-v-497a4894"]]),Fe={class:"md:w-full md:pl-16 md:pr-8 md:py-16 h-full"},Pe={key:0,class:"mb-9 border-b-2 border-hover-theme-green pb-8"},De=e("h1",{class:"text-theme-green md:text-left text-center"}," Reminders ",-1),Oe=[De],ze={class:"flex justify-between"},Ke=e("h3",null,"Would you like to receive notification?",-1),Le={key:1,class:"mb-6 flex justify-between"},We=e("div",null,[e("h1",{class:"text-theme-green font-medium"}," Personal Reminder "),e("p",null,"Schedule your reminder to make your affrimation fir your routine.")],-1),Ze={key:0},Xe={key:2,class:""},Ye={class:"overflow-y-auto relative h-auto md:h-auto"},Ge={class:"text-white text-base font-semibold"},Je={key:0,class:"text-white"},Qe={class:"flex justify-between"},He={class:"text-center"},et={class:"mt-2"},tt={class:"text-lg max-w-md mx-auto leading-6 mt-2 font-light"},ot={class:"flex items-center justify-center gap-x-2 mt-4"},vt={__name:"Reminder",props:{reminders:Object},setup(r){const i=r,a=_("Reminder"),s=_(!1),t=_(""),f=_(!1),d=_(!1),o=_(!1),c=_(""),W=_(!0),M=_({}),V=T({value:localStorage.getItem("isSubcribe")==="true"}),j=_(0);V.value=localStorage.getItem("isSubcribe"),j.value=localStorage.getItem("isNotify");const U=T({value:j.value==1}),Z=y=>{if(U.value=y,y){const l=ee({apiKey:"AIzaSyBGis6onNBKFoppXu-wPxCP5TrsNBVkZXc",authDomain:"affirm-618f9.firebaseapp.com",projectId:"affirm-618f9",storageBucket:"affirm-618f9.appspot.com",messagingSenderId:"142532545526",appId:"1:142532545526:web:3715ccaf284865529815d7",measurementId:"G-ZT5ZLC9V4W"}),k=te(l);Notification.permission!=="denied"&&Notification.requestPermission().then($=>{$==="granted"&&oe(k,{vapidKey:"BMa-Lyz6AeLZX31Ts0UdZBtTKCWqx1q73EQ_MEUJRxM7AXz31CF27BEYFaoBSlY0Koa52mkT3l10TIf9Il2eSEw"}).then(R=>{const A=T({fcm_token:R,isNotify:!0});D.post(route("fcmToken"),A),localStorage.setItem("isNotify",1)})}),k.onMessage(function($){const R=$.notification.title,A={body:$.notification.body,icon:$.notification.icon};new Notification(R,A)})}else{const n=T({isNotify:!1});D.post(route("fcmToken"),n),localStorage.setItem("isNotify",0)}},P=(y,n)=>{M.value=n,y==="delete"?o.value=!0:d.value=!0},X=y=>{const[n,l]=y.split(":");return new Date(0,0,0,n,l).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})};return(y,n)=>(u(),S(B(p(E.exports.isMobile)?se:le),{route_name:a.value},{default:C(()=>[e("div",{class:H(p(E.exports.isMobile)?"w-full h-full p-4":"")},[e("div",Fe,[p(E.exports.isMobile)?x("",!0):(u(),g("div",Pe,Oe)),e("div",ze,[Ke,m(qe,{notifiable:j.value,onToggleCheckbox:Z},null,8,["notifiable"])]),U.value?(u(),g("div",Le,[We,V.value?(u(),g("div",Ze,[m(w,{label:"Add",color:"success",class:"mt-3",onClick:n[0]||(n[0]=v(l=>f.value=!0,["prevent"]))})])):x("",!0)])):x("",!0),U.value?(u(),g("div",Xe,[e("div",Ye,[(u(!0),g(J,null,Q(i.reminders,l=>(u(),g("div",{key:l.id,class:"flex justify-between bg-hover-theme-green md:p-4 text-white rounded items-center mb-4"},[e("div",null,[e("p",Ge,I(X(l.original_time)),1),V.value?(u(),g("p",Je,' "'+I(l.custom_message?l.custom_message:"You can add your custom message")+'" ',1)):x("",!0)]),e("div",null,[m(fe,{notifiable:l.status,reminder:l},null,8,["notifiable","reminder"])]),e("div",Qe,[V.value?(u(),S(B(p(re)),{key:0,class:"w-5 h-5 cursor-pointer duration-200 ease-out text-blue-500",onClick:v(k=>P("edit",l),["stop"])},null,8,["onClick"])):x("",!0),(u(),S(B(p(ne)),{class:"w-5 h-5 cursor-pointer duration-200 ease-out text-rose-400",onClick:v(k=>P("delete",l),["stop"])},null,8,["onClick"]))])]))),128))])])):x("",!0)])],2),m(N,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=l=>s.value=l)},{default:C(()=>[e("div",He,[(u(),S(B(W.value?p(ie):p(de)),{class:"w-14 mx-auto text-green-600 duration-200 ease-out"})),e("h1",et,I(c.value),1),e("p",tt,I(t.value),1)]),e("div",ot,[m(ae,{label:"Cancel",color:"error",onClick:n[1]||(n[1]=v(l=>s.value=!1,["prevent"]))})])]),_:1},8,["modelValue"]),m(xe,{modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=l=>d.value=l),reminder:M.value},null,8,["modelValue","reminder"]),m(Ce,{modelValue:f.value,"onUpdate:modelValue":n[4]||(n[4]=l=>f.value=l),"is-subscribed":V},null,8,["modelValue","is-subscribed"]),m(Me,{modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=l=>o.value=l),reminder:M.value},null,8,["modelValue","reminder"])]),_:1},8,["route_name"]))}};export{vt as default};
