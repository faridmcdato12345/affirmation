import{o as p,f as g,a,j as x,B as N,b as u,u as v,r as D,T as j,t as h,w,c as b,H as S,i as y,d as $,D as q,K as B,e as C}from"../app.js";import{_ as I}from"./AuthenticatedLayout.44fd2bff.js";import{_ as E}from"./Button.7aedc941.js";import{_ as O}from"./Modal.4b7d0677.js";import{t as A}from"./useToast.e3f4d0c9.js";import{_ as V}from"./FormInput.f6e939f6.js";function U(r,s){return p(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[a("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"})])}function R(){return{stepsTitle:{1:"Alignment",2:"Own This Affirmation"},stepsDescription:{1:"Your alignment affects your perception",2:"You are the source of the change you want to see in your life."}}}const M=a("p",{class:"text-base mt-4 text-gray-700"}," On a scale of 1 to 5 (1 being the lowest) how do you feel today? ",-1),F=a("p",{class:"text-base mt-4 text-gray-700"}," On a scale of 1 to 5 (1 being the lowest) how much does this affirmation fit with you? ",-1),Y={__name:"AffirmationRate",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(r,{emit:s}){const i=r,e=x({get(){return i.modelValue},set(o){s("update:modelValue",o)}});return(o,n)=>{const t=N("rate");return p(),g("div",null,[a("div",null,[M,u(t,{modelValue:e.value.happiness_score,"onUpdate:modelValue":n[0]||(n[0]=c=>e.value.happiness_score=c),length:5},null,8,["modelValue"])]),a("div",null,[F,u(t,{modelValue:e.value.belief_score,"onUpdate:modelValue":n[1]||(n[1]=c=>e.value.belief_score=c),length:5},null,8,["modelValue"])])])}}};const z={class:"mt-4"},H=a("p",{class:"leading-4 text-gray-700"}," Try to think of three times your actions that have been in line with this belief ",-1),K={__name:"AffirmationExperience",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(r,{emit:s}){const i=r,e=x({get(){return i.modelValue},set(o){s("update:modelValue",o)}});return(o,n)=>(p(),g("div",z,[H,u(V,{id:"input1",modelValue:e.value.input1,"onUpdate:modelValue":n[0]||(n[0]=t=>e.value.input1=t),label:"First Experience",required:""},null,8,["modelValue"]),u(V,{id:"input2",modelValue:e.value.input2,"onUpdate:modelValue":n[1]||(n[1]=t=>e.value.input2=t),label:"Second Experience",required:""},null,8,["modelValue"]),u(V,{id:"input3",modelValue:e.value.input3,"onUpdate:modelValue":n[2]||(n[2]=t=>e.value.input3=t),label:"Third Experience",required:""},null,8,["modelValue"])]))}},P={class:"w-full h-full items-center justify-center"},W=a("h3",{class:"font-medium text-2xl text-center mt-2"}," Thank you! ",-1),G=a("p",{class:"text-center"}," Take a moment to thank yourself for taking care of you. ",-1),J={__name:"AffirmationFinish",setup(r){return(s,i)=>(p(),g("div",P,[u(v(U),{class:"w-20 h-20 text-rose-500 mx-auto"}),W,G]))}};const L={class:"absolute right-8"},Q={class:"text-green-700 font-medium"},X={class:"font-medium text-2xl"},Z={class:"leading-5"},ee={__name:"AffirmationExercise",props:{progressId:{type:[Number,String],required:!0}},emits:["close-modal"],setup(r,{emit:s}){const i=r,e=D(1),{stepsTitle:o,stepsDescription:n}=R(),t=j({progress_id:i.progressId,happiness_score:0,belief_score:0,input1:"",input2:"",input3:""}),c=()=>{e.value==3&&t.post(route("exercise.store"),{onSuccess:()=>{A.success("Today's exercise has been completed successfuly!"),t.reset(),s("close-modal")}}),e.value<3&&e.value++},f=x(()=>{var l;return(l=o[e.value])!=null?l:""}),_=x(()=>{var l;return(l=n[e.value])!=null?l:""});return(l,d)=>(p(),g("div",null,[a("div",L,[a("p",Q," Step "+h(e.value)+" / 3 ",1)]),a("div",null,[a("h3",X,h(f.value),1),a("p",Z,h(_.value),1)]),u(q,{appear:""},{default:w(()=>[a("div",null,[e.value==1?(p(),b(Y,{key:0,modelValue:v(t),"onUpdate:modelValue":d[0]||(d[0]=m=>S(t)?t.value=m:null)},null,8,["modelValue"])):y("",!0),e.value==2?(p(),b(K,{key:1,modelValue:v(t),"onUpdate:modelValue":d[1]||(d[1]=m=>S(t)?t.value=m:null)},null,8,["modelValue"])):y("",!0),e.value==3?(p(),b(J,{key:2})):y("",!0),u(E,{label:e.value<3?"Next":"STAY AWESOME!","btn-block":"",darken:e.value>=3,class:"mt-4",color:"success",loading:v(t).processing,onClick:$(c,["prevent"])},null,8,["label","darken","loading","onClick"])])]),_:1})]))}};function te(){return{insertData:async s=>{const i=indexedDB.open("user_info",2);i.onupgradeneeded=e=>{const o=e.target.result;o.objectStoreNames.contains("user")||o.createObjectStore("user",{keyPath:"id",autoIncrement:!1})},i.onsuccess=e=>{const o=e.target.result;if(o.objectStoreNames.contains("user")){const t=o.transaction("user","readwrite").objectStore("user"),c=t.count();c.onsuccess=f=>{if(f.target.result>0){const l=t.get(1);l.onsuccess=d=>{const m=d.target.result;if(m){m.user_id=s;const k=t.put(m);k.onsuccess=()=>{console.log("Data updated successfully")},k.onerror=T=>{console.error("Error updating data:",T.target.error)}}else console.log("Data with key not found")}}else{const l={id:1,user_id:s},d=t.add(l);d.onsuccess=()=>{console.log("Data added successfully")},d.onerror=m=>{console.error("Error adding data:",m.target.error)}}}}else o.transaction("user","readwrite").objectStore("user").add({id:1,user_id:s})},i.onerror=e=>{console.error("Error opening database:",e.target.error)}}}}const se={class:"h-screen flex flex-col items-center justify-center md:max-w-7xl"},oe={class:"px-4 text-4xl md:px-0 md:text-6xl font-medium tracking-tight text-center text-white max-w-5xl"},ce={__name:"Index",props:{affirmation:Object,progressId:[Number,String],exerciseFinished:Boolean,isSubscribed:Boolean,isNotify:Boolean,user_id:Number},setup(r){const s=r,i=B(),e=x(()=>i.props.auth.user),o=D(!1),{insertData:n}=te();localStorage.setItem("isSubcribe",s.isSubscribed),localStorage.setItem("isNotify",s.isNotify),localStorage.setItem("userId",s.user_id);const t=()=>{if(s.exerciseFinished)return A("You've already completed today's exercise");o.value=!0};C(()=>{n(s.user_id).then(()=>console.log("Data inserted to indexdb")),console.log("onMounted")});const c=x(()=>{var f;return(f=s.affirmation)==null?void 0:f.text.replace(/\{([^}]+)\}/,e.value.name)});return(f,_)=>(p(),b(I,null,{default:w(()=>[a("div",se,[a("h1",oe,h(c.value),1),u(E,{label:r.exerciseFinished?"Today's Exercise Complete":"Begin Exercise",size:"lg",rounded:"",color:"success",class:"mt-4",onClick:$(t,["prevent"])},null,8,["label","onClick"])]),u(O,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=l=>o.value=l)},{default:w(()=>[u(ee,{"progress-id":r.progressId,onCloseModal:_[0]||(_[0]=l=>o.value=!1)},null,8,["progress-id"])]),_:1},8,["modelValue"])]),_:1}))}};export{ce as default};
